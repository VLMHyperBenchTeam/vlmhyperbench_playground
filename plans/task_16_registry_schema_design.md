# Задача 16: Проектирование Схем Реестров (Configuration Schemas)

## Статус: ВЫПОЛНЕНО ✅

## Итоги реализации
Задача полностью реализована в рамках перехода на архитектуру v0.2.0. Старые CSV-конфиги заменены на атомарные YAML-реестры с поддержкой динамической композиции зависимостей.

### Что сделано:
1.  **Пакет `packages/task-registry`**:
    *   Реализованы Pydantic v2 схемы для всех сущностей (`MLTask`, `RunTask`, `Dataset`, `Metric`, `Report`, `Package`).
    *   Создан `RegistryManager` с поддержкой `RUN_MODE=dev/prod` и автоматическим мерджингом `.dev.yaml` оверлеев.
    *   Реализована кросс-валидация (проверка совместимости метрик и отчетов с типом задачи).
2.  **Инфраструктура**:
    *   Проект переведен на **Python 3.13** и **uv 0.9.26**.
    *   Настроена система сборки **uv.build**.
    *   Удалены устаревшие инструменты (`release-tool`) и `uv workspaces`.
3.  **Документация**:
    *   [ADR-011: Управление Реестрами и Режимы Исполнения](../docs_site/docs/architecture/adr/011-registry-management-and-run-modes.md).
    *   [Исследование: Динамическая композиция зависимостей в 2026 году](../docs_site/docs/research/dynamic-dependency-composition-2026.md).

## Где искать результаты:
*   **Схемы**: `packages/task-registry/src/task_registry/schemas/`.
*   **Логика загрузки**: `packages/task-registry/src/task_registry/manager.py`.
*   **Тесты**: `packages/task-registry/tests/test_manager.py`.
*   **Правила**: `.kilocode/rules/development.md`.

## Концепция (v0.2.0)
Архитектура реестров строится на принципах **атомарности**, **динамического разрешения зависимостей** и поддержки **режимов исполнения (RUN_MODE)**.

### Основные сущности:
*   **DependencySource**: Описание источника пакета (Local, Git, PyPI).
*   **PackageDefinition**: Атомарный конфиг пакета в `registries/packages/`.
*   **MLTask**: Определение типа задачи и разрешенных плагинов.
*   **RunTask**: Конкретный запуск с выбором модели, датасета и метрик.
*   **ExperimentPlan**: Группа RunTask'ов для параллельного запуска.

### Режимы исполнения (RUN_MODE):
*   `prod` (default): Используются стабильные версии пакетов (Git tags, PyPI).
*   `dev`: Приоритет отдается локальным версиям пакетов (`.dev.yaml` оверлеи).