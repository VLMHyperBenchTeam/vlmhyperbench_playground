# План: Создание отдельного PlantUML Docker рендерера

## Цель
Выделить PlantUML Docker рендерер в отдельный GitHub репозиторий `VLMHyperBenchTeam/plantuml-docker-renderer` и интегрировать в основной проект как git submodule.

## Этапы выполнения

### Этап 1: Подготовка нового репозитория
- [ ] Создать GitHub репозиторий `VLMHyperBenchTeam/plantuml-docker-renderer`
- [ ] Настроить базовую структуру файлов
- [ ] Перенести Dockerfile и Python скрипт
- [ ] Создать README.md с подробной документацией

### Этап 2: Настройка CI/CD
- [ ] Создать GitHub Actions workflow для сборки Docker образа
- [ ] Настроить публикацию в GitHub Container Registry
- [ ] Добавить автоматическое тегирование версий
- [ ] Протестировать CI/CD pipeline

### Этап 3: Интеграция в основной проект
- [ ] Добавить submodule в .gitmodules
- [ ] Обновить документацию в основном проекте
- [ ] Протестировать работу с образом из GitHub Container Registry
- [ ] Удалить старые файлы из основного проекта

### Этап 4: Финальная проверка
- [ ] Проверить работу образа из GitHub Container Registry
- [ ] Обновить все ссылки в документации
- [ ] Создать релиз v1.0.0
- [ ] Зафиксировать все изменения в git

## CHANGELOG

### [Планируется] v1.0.0 - Первый релиз PlantUML Docker рендерера

#### Добавлено
- [ ] Docker образ для рендеринга PlantUML диаграмм
- [ ] Python скрипт для пакетного рендеринга .puml файлов
- [ ] Поддержка форматов SVG и PNG
- [ ] Настраиваемая точка монтирования через переменную MOUNT_POINT
- [ ] Подробное логирование процесса рендеринга
- [ ] Обработка ошибок с информативными сообщениями
- [ ] GitHub Actions CI/CD для автоматической сборки и публикации
- [ ] Публикация в GitHub Container Registry (`ghcr.io/vlmhyperbenchteam/plantuml-renderer`)
- [ ] Подробная документация с примерами использования
- [ ] Интеграция в основной проект как git submodule

#### Технические детали
- [ ] Базовый образ: `plantuml/plantuml:latest`
- [ ] Поддерживаемые форматы: SVG, PNG
- [ ] Автоматический поиск всех .puml файлов в указанной директории
- [ ] Сохранение структуры папок при рендеринге
- [ ] Валидация входных параметров
- [ ] Обработка ошибок PlantUML

## Детальный план выполнения

### Шаг 1: Создание репозитория
```bash
# Создать репозиторий на GitHub
# Клонировать локально
git clone https://github.com/VLMHyperBenchTeam/plantuml-docker-renderer.git
cd plantuml-docker-renderer
```

### Шаг 2: Перенос файлов
```bash
# Скопировать файлы из основного проекта
cp ../docker/Dockerfile-plantuml ./Dockerfile
cp ../docker/render_plantuml.py ./
cp ../docs/plantuml-docker-renderer.md ./README.md
```

### Шаг 3: Настройка CI/CD
```bash
# Создать .github/workflows/docker-publish.yml
# Настроить автоматическую сборку и публикацию
```

### Шаг 4: Интеграция в основной проект
```bash
# Добавить submodule
git submodule add https://github.com/VLMHyperBenchTeam/plantuml-docker-renderer.git tools/plantuml-renderer

# Обновить документацию
# Удалить старые файлы
```

## Критерии готовности

### Функциональные требования
- [ ] Рендеринг всех .puml файлов в SVG/PNG
- [ ] Поддержка настраиваемой точки монтирования
- [ ] Подробное логирование процесса
- [ ] Обработка ошибок

### Технические требования
- [ ] Docker образ публикуется в GitHub Container Registry
- [ ] CI/CD автоматически собирает и публикует образ
- [ ] Submodule интегрирован в основной проект
- [ ] Документация обновлена

### Качество
- [ ] Код протестирован
- [ ] Документация полная и актуальная
- [ ] Примеры работают
- [ ] Обратная совместимость обеспечена

## Риски и митигация

### Риск: Потеря функциональности при переносе
**Митигация**: Тщательное тестирование на существующих .puml файлах

### Риск: Проблемы с CI/CD
**Митигация**: Поэтапное тестирование workflow

### Риск: Проблемы с правами доступа к GitHub Container Registry
**Митигация**: Проверка настроек организации и токенов

## Временные рамки

- **Этап 1**: 1-2 дня
- **Этап 2**: 1-2 дня
- **Этап 3**: 1 день
- **Этап 4**: 1 день

**Общее время**: 4-6 дней